{"version":3,"sources":["index.tsx"],"names":["Clipboard","React","forwardRef","useCallback","useEffect","useImperativeHandle","useReducer","useRef","Keyboard","Platform","StyleSheet","View","OtpInput","OtpInputsRef","fillOtpCode","ACTION_TYPES","setHandleChange","setOtpTextForIndex","setOtpCode","clearOtp","setHasKeySupport","reducer","state","type","payload","otpCode","index","text","handleChange","Object","values","join","numberOfInputs","code","hasKeySupport","styles","create","container","flex","flexDirection","alignItems","justifyContent","OtpInputs","ref","autofillFromClipboard","autoCapitalize","clearTextOnFocus","defaultValue","focusStyles","console","log","inputContainerStyles","inputStyles","isRTL","keyboardType","placeholder","secureTextEntry","selectTextOnFocus","style","testIDPrefix","restProps","previousCopiedText","inputs","dispatch","OS","reset","current","forEach","input","clear","setString","focus","firstInput","handleInputTextChange","length","handleClearInput","dismiss","fillInputs","focusInput","handleTextChange","handleKeyPress","nativeEvent","key","isNaN","parseInt","inputIndex","listenOnCopiedText","copiedText","getString","otpCodeValue","interval","setInterval","clearInterval","renderInputs","iterationArray","Array","fill","map","_","inputValue","createRef","keyPressEvent","select","android","ios"],"mappings":"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","sourcesContent":["import Clipboard from '@react-native-community/clipboard';\nimport React, {\n  RefObject,\n  forwardRef,\n  useCallback,\n  useEffect,\n  useImperativeHandle,\n  useReducer,\n  useRef,\n} from 'react';\nimport {\n  Keyboard,\n  NativeSyntheticEvent,\n  Platform,\n  StyleSheet,\n  TextInput,\n  TextInputKeyPressEventData,\n  TextInputProps,\n  TextStyle,\n  View,\n  ViewStyle,\n} from 'react-native';\n\nimport OtpInput from './OtpInput';\nimport { ActionTypes, OtpInputsRef, ReducerState, Actions } from './types';\nimport { fillOtpCode } from './helpers';\n\ntype Props = TextInputProps & {\n  autofillFromClipboard: boolean;\n  keyboardType?:\n    | 'default'\n    | 'email-address'\n    | 'phone-pad'\n    | 'visible-password'\n    | 'ascii-capable'\n    | 'numbers-and-punctuation'\n    | 'url'\n    | 'name-phone-pad'\n    | 'twitter'\n    | 'web-search'\n    | undefined;\n  style?: ViewStyle;\n  focusStyles?: ViewStyle;\n  defaultValue?: string;\n  handleChange: (otpCode: string) => void;\n  inputContainerStyles?: ViewStyle;\n  inputStyles?: TextStyle;\n  isRTL?: boolean;\n  numberOfInputs: number;\n  testIDPrefix?: string;\n};\n\nconst ACTION_TYPES: ActionTypes = {\n  setHandleChange: 'setHandleChange',\n  setOtpTextForIndex: 'setOtpTextForIndex',\n  setOtpCode: 'setOtpCode',\n  clearOtp: 'clearOtp',\n  setHasKeySupport: 'setHasKeySupport',\n};\n\nconst reducer = (state: ReducerState, { type, payload }: Actions) => {\n  switch (type) {\n    case ACTION_TYPES.setOtpTextForIndex: {\n      const otpCode = {\n        ...state.otpCode,\n        [`${payload.index}`]: payload.text,\n      };\n      state.handleChange(Object.values(otpCode).join(''));\n\n      return {\n        ...state,\n        otpCode,\n      };\n    }\n\n    case ACTION_TYPES.setOtpCode: {\n      const otpCode = fillOtpCode(payload.numberOfInputs, payload.code);\n\n      state.handleChange(Object.values(otpCode).join(''));\n\n      return {\n        ...state,\n        otpCode,\n      };\n    }\n\n    case ACTION_TYPES.clearOtp: {\n      const otpCode = fillOtpCode(payload);\n      state.handleChange(Object.values(otpCode).join(''));\n\n      return { ...state, otpCode };\n    }\n\n    case ACTION_TYPES.setHandleChange: {\n      return { ...state, handleChange: payload };\n    }\n\n    case ACTION_TYPES.setHasKeySupport: {\n      return { ...state, hasKeySupport: payload };\n    }\n\n    default:\n      return state;\n  }\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n  },\n});\n\nconst OtpInputs = forwardRef<OtpInputsRef, Props>(\n  (\n    {\n      autofillFromClipboard = true,\n      autoCapitalize = 'none',\n      clearTextOnFocus = false,\n      defaultValue,\n      focusStyles,\n      handleChange = console.log,\n      inputContainerStyles,\n      inputStyles,\n      isRTL = false,\n      keyboardType = 'phone-pad',\n      numberOfInputs = 4,\n      placeholder = '',\n      secureTextEntry = false,\n      selectTextOnFocus = true,\n      style,\n      testIDPrefix = 'otpInput',\n      ...restProps\n    },\n    ref,\n  ) => {\n    const previousCopiedText = useRef<string>('');\n    const inputs = useRef<Array<RefObject<TextInput>>>([]);\n    const [{ otpCode, hasKeySupport }, dispatch] = useReducer(\n      reducer,\n      {},\n      () => ({\n        otpCode: fillOtpCode(numberOfInputs, defaultValue),\n        handleChange,\n        hasKeySupport: Platform.OS === 'ios',\n      }),\n    );\n\n    useEffect(() => {\n      dispatch({ type: ACTION_TYPES.setHandleChange, payload: handleChange });\n    }, [handleChange]);\n\n    useImperativeHandle(\n      ref,\n      () => ({\n        reset: (): void => {\n          dispatch({ type: ACTION_TYPES.clearOtp, payload: numberOfInputs });\n          inputs.current.forEach((input) => input?.current?.clear());\n          previousCopiedText.current = '';\n          Clipboard.setString('');\n        },\n        focus: (): void => {\n          const firstInput = inputs.current[0];\n          firstInput?.current?.focus();\n        },\n      }),\n      [numberOfInputs],\n    );\n\n    const handleInputTextChange = (text: string, index: number): void => {\n      if (!text.length) {\n        handleClearInput(index);\n      }\n\n      if (text.length > 1) {\n        handleClearInput(index);\n        Keyboard.dismiss();\n        return fillInputs(text);\n      }\n\n      if (text) {\n        dispatch({\n          type: ACTION_TYPES.setOtpTextForIndex,\n          payload: {\n            text,\n            index,\n          },\n        });\n        focusInput(index + 1);\n      }\n\n      if (index === numberOfInputs - 1 && text) {\n        Keyboard.dismiss();\n      }\n    };\n\n    const handleTextChange = (text: string, index: number) => {\n      if (\n        (Platform.OS === 'android' && !hasKeySupport) ||\n        // Pasted from input accessory\n        (Platform.OS === 'ios' && text.length > 1)\n      ) {\n        handleInputTextChange(text, index);\n      }\n    };\n\n    const handleKeyPress = (\n      {\n        nativeEvent: { key },\n      }: NativeSyntheticEvent<TextInputKeyPressEventData>,\n      index: number,\n    ) => {\n      handleInputTextChange(key === 'Backspace' ? '' : key, index);\n\n      if (Platform.OS === 'android' && !hasKeySupport && !isNaN(parseInt(key)))\n        dispatch({ type: ACTION_TYPES.setHasKeySupport, payload: true });\n    };\n\n    const focusInput = useCallback(\n      (index: number): void => {\n        if (index >= 0 && index < numberOfInputs) {\n          const input = inputs.current[index];\n          input?.current?.focus();\n        }\n      },\n      [numberOfInputs],\n    );\n\n    const handleClearInput = useCallback(\n      (inputIndex: number) => {\n        const input = inputs.current[inputIndex];\n        input?.current?.clear();\n        dispatch({\n          type: ACTION_TYPES.setOtpTextForIndex,\n          payload: {\n            index: inputIndex,\n            text: '',\n          },\n        });\n        focusInput(inputIndex - 1);\n      },\n      [focusInput],\n    );\n\n    const fillInputs = useCallback(\n      (code: string) => {\n        dispatch({\n          type: ACTION_TYPES.setOtpCode,\n          payload: { numberOfInputs, code },\n        });\n      },\n      [numberOfInputs],\n    );\n\n    const listenOnCopiedText = useCallback(async (): Promise<void> => {\n      const copiedText = await Clipboard.getString();\n      const otpCodeValue = Object.values(otpCode).join('');\n\n      if (\n        copiedText &&\n        copiedText.length === numberOfInputs &&\n        copiedText !== otpCodeValue &&\n        copiedText !== previousCopiedText.current\n      ) {\n        previousCopiedText.current = copiedText;\n        fillInputs(copiedText);\n      }\n    }, [fillInputs, numberOfInputs, otpCode]);\n\n    useEffect(() => {\n      let interval: NodeJS.Timeout;\n\n      if (autofillFromClipboard) {\n        interval = setInterval(() => {\n          listenOnCopiedText();\n        }, 500);\n      }\n\n      return () => {\n        clearInterval(interval);\n      };\n    }, [autofillFromClipboard, listenOnCopiedText, numberOfInputs]);\n\n    const renderInputs = (): Array<JSX.Element> => {\n      const iterationArray = Array<number>(numberOfInputs).fill(0);\n\n      return iterationArray.map((_, index) => {\n        let inputIndex = index;\n        if (isRTL) {\n          inputIndex = numberOfInputs - 1 - index;\n        }\n        const inputValue = otpCode[`${inputIndex}`];\n\n        if (!inputs.current[inputIndex]) {\n          inputs.current[inputIndex] = React.createRef<TextInput>();\n        }\n\n        return (\n          <OtpInput\n            autoCapitalize={autoCapitalize}\n            clearTextOnFocus={clearTextOnFocus}\n            firstInput={index === 0}\n            focusStyles={focusStyles}\n            handleKeyPress={(\n              keyPressEvent: NativeSyntheticEvent<TextInputKeyPressEventData>,\n            ) => handleKeyPress(keyPressEvent, inputIndex)}\n            handleTextChange={(text: string) =>\n              handleTextChange(text, inputIndex)\n            }\n            inputContainerStyles={inputContainerStyles}\n            inputStyles={inputStyles}\n            inputValue={inputValue}\n            key={inputIndex}\n            keyboardType={keyboardType}\n            maxLength={Platform.select({\n              android: 1,\n              ios: index === 0 ? numberOfInputs : 1,\n            })}\n            numberOfInputs={numberOfInputs}\n            placeholder={placeholder}\n            // @ts-ignore\n            ref={inputs.current[inputIndex]}\n            secureTextEntry={secureTextEntry}\n            selectTextOnFocus={selectTextOnFocus}\n            testID={`${testIDPrefix}-${inputIndex}`}\n            {...restProps}\n          />\n        );\n      });\n    };\n\n    return <View style={style || styles.container}>{renderInputs()}</View>;\n  },\n);\n\nexport { OtpInputsRef };\nexport default OtpInputs;\n"]}